+function(){var e={oRich:null,oUser:{},oChat:{viewerDelay:2e3,nMsgSize:25,chatStatus:0,bChatDelay:!1,lastChatTime:0},oChatStatus:{bNoChatByServer:!1,errorInfo:"",bReconnecting:!1,bNewLogin:!1,roomWaitForRelogin:!1},chatSubmitQuery:[],oChatContent:[],options:{oColors:{admin:"fe4e00",xuanzi:"029f0e",fans:"008aff",fansin:"fe0000",sysmsg:"f46933",vcolor:"ff9600"},vLevelClass:["","orange-authenticate","orange-authenticate","orange-authenticate"]},init:function(){var e=this;e.oChater=yp.extend(ObjectList,{id:"gid"}),this.listenYpEvent(),this.listenSocketEvent(),this.fCommonIconHtmlFun(),this.fLoadMedal(),yp.module.fRegistModule("oMainData",e),$.when(flashReadyDtd).done(function(){e.fFlashData(),e.fRoomLogin()})},listenYpEvent:function(){var e=this;yp.sub("page/terminal/msg",function(o,t){"/tianshu"==t.content?yp.module.fCallFun("oBaseUI","fLoadTianshu",[]):e.ajax_socket("instreq",t)}),yp.sub("page/chatmessage",function(o,t){e.ajax_socket("chatmessage",t)}),yp.sub("page/iconHtml/fun",function(o,t){e.fRegistIconHtmlFun(t.aFun)}),yp.sub("page/socketrelogin",function(o,t){t.refleshChat&&yp.module.fCallFun("oBaseUI","fYpchatClear",[]),e.fRoomLogin()}),yp.sub("page/closeSocket",function(o,t){t.relogin&&(e.oChatStatus.roomWaitForRelogin=!0),e.ajax_socket("jclochreq")}),yp.sub("page/fans/setadmin",function(o,t){e.ajax_socket("setadminreqbyuid",t)}),yp.sub("page/gift/use",function(o,t){return t.content?void e.fShowGiftMsg(t):!1}),yp.sub("page/room/sysmsg",function(o,t){t.myself=t.liClass||"gag",e.fShowSystemMsg(t)}),yp.sub("page/room/login/done",function(o,t){var a=oPageConfig.oRoom.isStar&&oPageConfig.oRoom.isStar.isWeek,n=oPageConfig.oRoom.isStar&&oPageConfig.oRoom.isStar.isMonth;if(65==oPageConfig.oRoom.gameId&&(a||n)){var t={};oPageConfig.oRoom.uid!=e.oUser.uid?t.content='<i class="'+(n?"moonStar-icon":"weekStar-icon")+' dv"></i><span class="stars-span dv">亲爱的<span class="name">&nbsp;'+e.oUser.nickname+"&nbsp;</span>，欢迎来到百变娱乐"+(n?"本月月星":"本周周星")+'<span class="name">&nbsp;'+oPageConfig.oRoom.nickname+"&nbsp;</span>的直播间</span>":t.content='<i class="'+(n?"moonStar-icon":"weekStar-icon")+' dv"></i><span class="stars-span dv">亲爱的<span class="name">&nbsp;'+e.oUser.nickname+"&nbsp;</span>，欢迎您回来</span>",t.myself="",e.fShowSystemMsg(t)}else oPageConfig.oRoom.uid!=e.oUser.uid?yp.pub("page/room/sysmsg",{content:'亲爱的<span class="name">&nbsp;'+e.oUser.nickname+'&nbsp;</span>，欢迎您来到<span class="name">&nbsp;'+oPageConfig.oRoom.nickname+"&nbsp;</span>的直播间"}):yp.pub("page/room/sysmsg",{content:'亲爱的<span class="name">&nbsp;'+e.oUser.nickname+"&nbsp;</span>，欢迎您回来"})}),yp.sub("page/viewer/enter",function(o,t){var a='<span>欢迎&nbsp;</span>${iconHtml}<span class="name">${fansname}${vIconHtml}&nbsp;</span><span>进入直播间</span>';t.data.vlevel&&(t.vIconHtml=e.fReturnVIconHtml(t.data)),t.data.level=t.data.fanslevel,t.data=e.fReturnIconHtml(t.data,"enter");var n={myself:"level-in",content:yp.format(a,t.data)};e.fShowSystemMsg(n)}),yp.sub("page/chatmsg/custom",function(o,t){switch(t.type){case"normal":e.fShowSystemMsg(t.data);break;case"chat":e.fShowChatMsg(t.data,t.beFormat)}}),yp.sub("page/fans/level/update",function(o,t){oPageConfig.oLoginInfo&&t.uid==oPageConfig.oLoginInfo.uid&&(e.oUser.level=t.level,e.oUser.curexp=t.curexp,e.oUser.nextexp=t.nextexp,e.oUser.leftexp=t.leftexp,e.oUser.showmedal=t.show,e.oUser.rank=t.rank,yp.pub("page/room/viewer/update",e.oUser))}),yp.sub("page/login/done",function(){e.fSendUserinfo()}),yp.sub("page/regist/done",function(){e.fSendUserinfo()}),yp.sub("page/chat/extradata/regist",function(o,t){e.fChatExtraDataRegist(t)}),yp.sub("page/showdmc",function(){e.fShowChatMsg({fromname:e.oUser.nickname,fromid:e.oUser.gid,content:""+oPageConfig.oRoom.flashvars.ChatRoomId})})},listenSocketEvent:function(){var e=this;$.topic("msgc/loginresp").sub(function(o){e.fAfterLogin(o),yp.pub("page/socket/resp_login")}),$.topic("msgc/error").sub(function(o){var t=o.code;e.fDealErrorCode(t)}),$.topic("msgc/userupdate").sub(function(o){var t=o.action;"update"===t&&yp.each(o.data,function(o){(oPageConfig.oViewer.uid=e.oUser.uid)&&(e.oUser.permission=o.permission,e.oChat.nMsgSize=10<=o.permission?1e3:25,yp.module.fCallFun("oBaseUI","fSetChatMaxLength",[]),yp.pub("page/room/viewer/update",e.oUser));var t=e.oChater.getOne(o.gid);t&&(t.permission=o.permission,t.mute=o.mute)})}),$.topic("msgc/denyuserlist").sub(function(o){e.oUser.blocklist=o.targetid}),$.topic("msgc/chatmessage").sub(function(o){if(o.toid==e.oUser.gid&&10<=o.permission)alert('<p style="padding: 0 10px; text-align: left;">'+e.fFormatNotice(o.content)+"</p>","","",{title:"通知"});else if(!~$.inArray(o.fromuid,e.oUser.blocklist)){if(!o.fromname)return!1;o.fromuid==e.oUser.uid&&(e.oUser.msgcnt++,yp.module.fCallFun("oBaseUI","fDanmuColorSet",[])),yp.pub("page/translate/start",{content:o.content,uid:o.fromuid,nickname:o.fromname,fromname:o.fromname}),35<o.slevel&&(o.slevel=0),9<o.pos&&(o.pos=0),e.fShowChatMsg(o);var t=e.oChater.getOne(o.fromid);if(t)t.uid=o.fromuid,t.permission=o.permission||0,t.slevel=o.slevel,t.chatTime=$.now(),t.nickname=o.fromname,t.guard=o.guard,o.ip&&(t.ip=o.ip),o.swip&&(t.swip=o.swip);else{var a={gid:o.fromid,ip:o.ip||"000.000.000.000",swip:o.swip||0,mute:0,nickname:o.fromname,uid:o.fromuid||0,permission:o.permission||0,slevel:o.slevel,chatTime:$.now(),guard:o.guard};e.oChater.add(a)}}}),$.topic("msgc/getuc").sub(function(e){yp.module.fCallFun("oBaseUI","fSetOnline",[e.count])}),$.topic("msgc/reloginresp").sub(function(o){e.oChatStatus.bReconnecting=!1,1==o.result||(e.oChatStatus.bNoChatByServer=!0,e.oChatStatus.errorInfo="抱歉，重连失败噢",e.fChatConnesctNotice(!0))}),$.topic("msgc/roomnospeak").sub(function(o){e.oChat.chatStatus=o.chatStatus}),$.topic("msgc/reportuser").sub(function(e){var o=e.result;yp.notify(o.msg,o.code)}),$.topic("msgc/adminchat").sub(function(o){o.targetid==e.oUser.gid&&alert('<p style="padding: 0 10px; text-align: left;">'+e.fFormatNotice(o.content)+"</p>","","",{title:"通知"})}),$.topic("msgc/chathassay").sub(function(e){yp.pub("page/chat/tips",{msg:"亲，您是复读机吗？"})}),$.topic("msgc/serverResp").sub(function(o){e.fShowChatMsg({fromname:e.oUser.nickname,fromid:e.oUser.gid,content:""+o.server})}),$.topic("msgc/Level.Anchor").sub(function(e){yp.pub("page/anchor/level/update",e.data)}),$.topic("msgc/Level.Fans").sub(function(e){e=e.data||e,oPageConfig.oLoginInfo&&!e.uid&&(e.uid=oPageConfig.oLoginInfo.uid),yp.pub("page/fans/level/update",e)}),$.topic("msgc/setadminrespbyuid").sub(function(e){0==e.code?yp.successNotify("设置成功"):alert(e.msg)}),$.topic("msgc/blockuser").sub(function(e){var o="";if(e.action)switch(e.result){case 0:o="禁言成功";break;case 1:o="禁言失败";break;case 2:o="该用户已被禁言"}else o=0==e.result?"解封成功":"解封失败",yp.pub("page/unblock/result",e);yp.notify(o,e.result)}),$.topic("msgc/blockusernotify").sub(function(o){if(o.blockuid==e.oUser.uid)return!1;var t='<span class="name">&nbsp;${blockname}&nbsp;</span><span class="ml4">已被${action}</span>',a={blockname:o.blockname,action:""};o.action?a.action="禁言":a.action="解除禁言",o.content=yp.format(t,a),o.myself="gag",e.fShowSystemMsg(o)}),$.topic("msgc/notefanslevel").sub(function(e){yp.pub("page/viewer/enter",e)}),$.topic("msgc/halfguest").sub(function(e){oPageConfig.oHalfGuest=oPageConfig.oHalfGuest||{},oPageConfig.oHalfGuest.state=e.state,yp.pub("page/halfguest/change",e)}),$.topic("msgc/chatmessage2").sub(function(o){o.usexuanzi=e.oChat.useHyunWord?1:0,o.speakinroom=10<=e.oUser.permission?1:0,o.level=e.oUser.level,o.showmedal=e.oUser.showmedal,yp.pub("page/chat/myself",$.extend({},o))}),$.topic("msgc/winsizereq").sub(function(){e.ajax_socket("winsizeack",{wid:$(window).width(),hei:$(window).height()})}),$.topic("msgc/ifdomreq").sub(function(){e.ajax_socket("ifdomack",{dom:window!=window.parent?document.referrer:""})}),$.topic("msgc/Live.Ban").sub(function(o){oPageConfig.oRoom.uid==e.oUser.uid&&yp.pub("page/live/ban",o)}),$.topic("msgc/s.level").sub(function(o){o.data.uid==e.oUser.uid&&(e.oUser.slevel=o.data.slevel,e.oUser.pos=o.data.pos,yp.pub("page/room/viewer/update",e.oUser))}),$.topic("msgc/Level.Site").sub(function(o){e.oUser.slevel=o.data.level,e.oUser.pos=o.data.pos,yp.pub("page/room/viewer/update",e.oUser),yp.pub("page/site/level/update",o.data)}),$.topic("msgc/instack").sub(function(o){e.fShowChatMsg({fromname:e.oUser.nickname,fromid:e.oUser.gid,content:o.content})}),$.topic("msgc/thirdchatmsg").sub(function(e){var o=$.now();e.chatid="chat_"+o,e.fromid="gid_"+o,e.fromuid="uid_"+o,e.permission=0,e.useemot="-1",$.topic("msgc/chatmessage").pub(e)}),$.topic("msgc/supernote").sub(function(o){new Date;alert('<p style="padding: 0 10px; text-align: left;">'+e.fFormatNotice(o.content)+"</p>","","",{title:'<span style="color:red;">超管提醒 '+fDateFormat("yyyy-MM-dd hh:mm")+"</span>",width:300}),yp.pub("page/room/sysmsg",{content:o.content})}),$.topic("msgc/notetips").sub(function(e){yp.pub("page/chat/tips",{msg:e.tips})}),$.topic("msgc/User.prop").sub(function(o){var t=!1;for(var a in o.data)o.data[a]&&(t=!0,"medal"==a?e.oUser.ams=o.data[a]:e.oUser[a]=o.data[a]);t&&yp.pub("page/room/viewer/update",e.oUser)}),$.topic("msgc/kamsgreq").sub(function(){yp.pub("page/chat/tips",{msg:'直播卡顿？你可以切换<a href="javascript:;" class="js-change-view-level">画质</a>试试 '})})},ajax_socket:function(e,o){var t=this;return t.oChatStatus.bNewLogin?!1:(o=o||{},yp.ajax(e,{type:"socket",data:o}))},fFlashData:function(){var e=this;e.fSendUserinfo(),e.ajax_socket("colorconfig",e.options.oColors),e.ajax_socket("getdefaultuc",{roomid:oPageConfig.oRoom.id,vod:0})},fSendUserinfo:function(){var e=this,o={uid:oPageConfig.oLoginInfo?oPageConfig.oLoginInfo.uid:0,bindEmail:oPageConfig.oLoginInfo?oPageConfig.oLoginInfo.bindEmail:"",bindMobile:oPageConfig.oLoginInfo?oPageConfig.oLoginInfo.bindMobile:""};e.ajax_socket("userinfo",o)},fRoomLogin:function(){var e=this,o=getQueryString("_p");(!o||isNaN(o))&&(o=0);var t={roomid:+oPageConfig.oRoom.id,uid:oPageConfig.oViewer.uid,gid:oPageConfig.oViewer.gid,sid:oPageConfig.oViewer.sid,timestamp:oPageConfig.oViewer.timestamp,nickname:oPageConfig.oViewer.nickname,t:0,thirdaccount:oPageConfig.oViewer.ext&&oPageConfig.oViewer.ext.from?oPageConfig.oViewer.ext.from:"",fx:+o,roomdata:oPageConfig.oViewer.roomdata,hideslv:oPageConfig.oLoginInfo?+!(!+$.cookie("site_invisible_new_"+oPageConfig.oLoginInfo.uid)||!(16<=oPageConfig.oLoginInfo.slevel.level||6<=oPageConfig.oLoginInfo.slevel.pos)):0,tagid:getQueryString("ti")||0,ajp:e.fGetAJPParam()};e.ajax_socket("loginreq",t)},fReloginRoom:function(e){var o=this;e.oViewer&&(oPageConfig.oViewer=e.oViewer),o.oChatStatus.bNewLogin||e.loginNow?(o.oChatStatus.bNewLogin=!1,yp.pub("page/socketrelogin",{refleshChat:!1})):yp.pub("page/closeSocket",{relogin:!0})},fGetAJPParam:function(){var e=getQueryString("param_s"),o=0;return e&&(e=e.split("."),e[0]=e[0].split("_"),0==e[0][0]?o=-1:1==e[0][0]?o=-2:2==e[0][0]&&(o=+e[0][1])),o},fAfterLogin:function(e){var o=this;if(0==e.result){var t=e.data[0];o.oUser=$.extend({permission:0,msgcnt:0,inweeklist:0,intotallist:0},t),o.oChat.nMsgSize=10<=t.permission?1e3:25,yp.module.fCallFun("oBaseUI","fSetChatMaxLength",[]),o.oChatStatus.bNoChatByServer=!1,o.oUser.level=0,o.oUser.curexp=0,o.oUser.nextexp=0,o.oUser.leftexp=0,o.oUser.showmedal=0,o.oUser.slevel=0,o.oUser.pos=0,o.fChatConnesctNotice(),o.fChatAutoSubmit(),yp.pub("page/room/viewer/login",o.oUser),yp.pub("page/room/login/done")}else{var a={};a.content=e.msg,yp.module.fCallFun("oBaseUI","fYpchatOnmsg",[a,!0])}},fChatSubmit:function(e,o){var t=this,a=t.oChat.viewerDelay,n=e.length;if(10>t.oUser.permission&&-1==t.oChat.chatStatus)return yp.errorNotify("禁止所有人聊天"),!1;if(t.oChat.bChatDelay&&10>t.oUser.permission){var s=a-$.now()+t.oChat.lastChatTime;return s=Math.ceil(s/1e3),yp.module.fCallFun("oBaseUI","fShowChatCutdown",[s]),!1}if(n>t.oChat.nMsgSize)return yp.errorNotify("最长支持"+t.oChat.nMsgSize+"个字的消息"),yp.module.fCallFun("oBaseUI","fChatMsgInputFun",["focus"]),!1;if(!t.fBindStatus())return!1;var i={content:e,toid:0,style:null,speakinroom:10<=t.oUser.permission?1:0,level:t.oUser.level,permission:t.oUser.permission||1,vlevel:t.oUser.vlevel||0,vdesc:t.oUser.vdesc||"",slevel:t.oUser.slevel||0,pos:t.oUser.pos||0};o&&(i.hot=1),t.fDealBeforeSubmit(i,0)},fDealBeforeSubmit:function(e,o){var t=this;if(t.aExtraDataFn[o]){var a=t.aExtraDataFn[o];a.fun.call(a.caller,e).done(function(a){e=a.oChatMsg||e,o++,t.fDealBeforeSubmit(e,o)}).fail(function(e){yp.pub("page/chatsubmit/error",e)})}else t.fDoChatSubmit(e)},fDoChatSubmit:function(e){var o=this;return yp.module.fCallFun("oBaseUI","fChatMsgInputFun",["empty"]),yp.module.fCallFun("oBaseUI","fYpchatSendMsg",["chatmessage",e]),yp.pub("page/chat/tips/hide"),o.oChatStatus.bReconnecting&&(o.oChatStatus.bNoChatByServer=!0),o.oChatStatus.bNoChatByServer?(5<=o.chatSubmitQuery.length&&o.chatSubmitQuery.shift(),o.chatSubmitQuery.push(e),!1):(o.oChat.bChatDelay=!0,o.lastChatTime=$.now(),setTimeout(function(){o.oChat.bChatDelay=!1},o.oChat.viewerDelay),void yp.module.fCallFun("oBaseUI","fChatMsgInputFun",["focus"]))},fChatAutoSubmit:function(){var e=this;e.chatSubmitQuery.length&&(yp.module.fCallFun("oBaseUI","fYpchatSendMsg",["chatmessage",e.chatSubmitQuery[e.chatSubmitQuery.length-1]]),e.chatSubmitQuery=[])},fChatConnesctNotice:function(e){var o=this;yp.module.fCallFun("oBaseUI","fShowConnectNotice",[o.oChatStatus.bNoChatByServer,o.oChatStatus.errorInfo,e])},fBindStatus:function(){return yp.module.fCallFun("oBaseUI","fBindStatus",[])},fDealErrorCode:function(e){var o=this;switch(+e){case 59:o.oChatStatus.errorInfo="您已在别处登录，是否重连？",o.oChatStatus.bNoChatByServer=!0,o.oChatStatus.bNewLogin=!0,o.fChatConnesctNotice(!0);break;case 204:o.oChatStatus.errorInfo="抱歉，登录失败噢",o.oChatStatus.bNoChatByServer=!0,o.fChatConnesctNotice(!0);break;case 210:yp.pub("page/closeSocket",{relogin:!1}),o.oChatStatus.errorInfo="抱歉，登录失败噢",o.oChatStatus.bNoChatByServer=!0,o.fChatConnesctNotice(!0);break;case 10002:o.oChatStatus.bNewLogin||(o.oChatStatus.errorInfo="抱歉，连接失败噢",o.oChatStatus.bNoChatByServer=!0,o.fChatConnesctNotice(!0),o.oChatStatus.roomWaitForRelogin&&(yp.pub("page/socketrelogin",{refleshChat:!1}),o.oChatStatus.roomWaitForRelogin=!1));break;case 10010:o.oChatStatus.errorInfo="连接中，请稍后...",o.oChatStatus.bReconnecting=!0;break;case 62:alert("昵称中包含敏感词，请前往用户中心修改",function(){window.open("/user/info")}),o.oChatStatus.errorInfo="昵称中有敏感词",o.oChatStatus.bNoChatByServer=!0;break;case 63:alert("昵称中的数字超过5个，请前往用户中心修改",function(){window.open("/user/info")}),o.oChatStatus.errorInfo="昵称中数字过长",o.oChatStatus.bNoChatByServer=!0;break;default:o.oChatStatus.errorInfo="抱歉，连接失败噢",o.oChatStatus.bNoChatByServer=!0,o.fChatConnesctNotice(!0)}},fShowChatMsg:function(e,o){var t=this,a='${iconHtml}<a href="javascript:;" data-chatid="${chatid}" class="name js-show-chat-menu" style="${style}" data-area="chat" data-id="${fromid}">                    <span class="di">${fromname}${vIconHtml}：</span></a><span class="chat-span">${content}</span>';e.chatid&&(t.oChatContent[e.chatid]=e.content),e.iconHtml="",e.vIconHtml="",e.fromid&&e.fromid==t.oUser.gid?(e.myself="myself",e.fromname=t.oUser.nickname):e.myself="",10<=e.permission&&(e.myself="gm",40<=e.permission&&(e.myself+=" s-gm")),40<=t.oUser.permission&&(e.fromname=e.fromname+"["+(e.swline||0)+"]["+(e.swrate||0)+"]"),e.vlevel&&(e.uid=e.fromuid,e.vIconHtml=t.fReturnVIconHtml(e)),e=t.fReturnIconHtml(e,"chat");var n="";if(e.txtcolor&&(n="color:#"+e.txtcolor+";"),e.style=n,o=void 0==o?!0:o,o&&(e.content=t.fFormatNotice(e.content)),e.content=yp.module.fCallFun("oBaseUI","fEmotNumToImg",[e.content,e.useemot]),!e.content)return!1;e.content=yp.format(a,e);var s=t.fShouldAutoScroll(e.fromid);yp.module.fCallFun("oBaseUI","fYpchatOnmsg",[e,s]),s?t.fNewMsgNotice(!1):t.fNewMsgNotice(!0),yp.module.fCallFun("oBaseUI","fDealChatLen",[])},fShowSystemMsg:function(e){var o=this,t=o.fShouldAutoScroll();yp.module.fCallFun("oBaseUI","fYpchatOnmsg",[e,t]),t?o.fNewMsgNotice(!1):o.fNewMsgNotice(!0)},fShowGiftMsg:function(e){var o=this,t=o.fShouldAutoScroll(e.fromid);yp.module.fCallFun("oBaseUI","fYpchatOnmsg",[e,t]),t?o.fNewMsgNotice(!1):o.fNewMsgNotice(!0)},aIconHtmlFun:[],fRegistIconHtmlFun:function(e){var o=this;"array"!=$.type(e)&&(e=[e]),[].push.apply(o.aIconHtmlFun,e),fSortArr(o.aIconHtmlFun,"weight")},fCommonIconHtmlFun:function(){var e=this;yp.pub("page/iconHtml/fun",{aFun:[{key:"fans",weight:0,fun:function(e,o){switch(o){case"chat":case"gift":0<e.level&&40>e.permission&&(e.iconHtml='<a href="https://www.zhanqi.tv/faq/1364.html" target="_blank" class="fans-grade png fans-grade-'+e.level+' dv"><span>'+oPageConfig.oRoom.fansTitle+"</span></a>"+e.iconHtml);break;default:0<e.level&&(e.iconHtml='<a href="https://www.zhanqi.tv/faq/1364.html" target="_blank" class="fans-grade png fans-grade-'+e.level+' dv"><span>'+oPageConfig.oRoom.fansTitle+"</span></a>"+e.iconHtml)}}},{key:"permission",weight:10,fun:function(e,o){10<=e.permission&&(30==e.permission?e.iconHtml='<i class="anchor-gm"></i>'+e.iconHtml:40==e.permission?e.iconHtml='<i class="super-gm"></i>'+e.iconHtml:e.iconHtml='<i class="room-gm"></i>'+e.iconHtml)}},{key:"slevel",weight:20,fun:function(e,o){var t=fLevelIconClass(e.slevel,e.pos);switch(o){case"enter":(e.slevel||8<=e.pos)&&(e.iconHtml='<i class="all-level '+t+' dv"></i>'+e.iconHtml);break;case"chat":case"gift":30>e.permission&&(e.slevel||e.pos)&&(e.iconHtml='<i class="all-level '+t+' dv"></i>'+e.iconHtml)}}},{key:"extra",weight:30,fun:function(e,o){if("chat"!=o)return!1;if(e.extra)switch(e.extra.toLowerCase()){case"iphone":e.iconHtml='<i class="mobile-app-icon png" title="来自战旗移动APP"></i>'+e.iconHtml;break;case"ipad":e.iconHtml='<i class="mobile-app-icon png" title="来自战旗移动APP"></i>'+e.iconHtml;break;case"android":e.iconHtml='<i class="mobile-app-icon png" title="来自战旗移动APP"></i>'+e.iconHtml}}},{key:"thirdaccount",weight:40,fun:function(e,o){return"chat"!=o?!1:void(e.thirdaccount&&"baidu"==e.thirdaccount&&(e.iconHtml='<i class="baidu-icon png"></i>'+e.iconHtml))}},{key:"guard",weight:50,fun:function(e){0<e.guard&&(e.iconHtml='<a href="https://www.zhanqi.tv/news/2016/09/18/1245.html" target="_blank" class="dv guardian-icon guardian-'+e.guard+'"></a>'+e.iconHtml)}},{key:"ams",weight:60,fun:function(o){if(o.ams&&e.oMedal){var t=o.ams.split(",");yp.each(t,function(t){e.oMedal[t]&&Math.floor($.now()/1e3)<e.oMedal[t].endTime&&(o.iconHtml='<img class="insignia-img js-medal-hover" src="'+e.oMedal[t].pic+'" data-desc="'+e.oMedal[t].activeName+'" />'+o.iconHtml)})}}}]})},fFormatNotice:function(e){return e=filterXSS(e),e=e.replace(/\r\n/g,"<br>"),e=e.replace(/\n/g,"<br>"),e=e.replace(/\s/g,"&nbsp;")},bChatListHidden:!1,bSetAutoScroll:!0,fSetAutoScroll:function(){var e=this;return e.bSetAutoScroll=!e.bSetAutoScroll,e.bSetAutoScroll},fShouldAutoScroll:function(e){var o=this,t=!o.bChatListHidden&&(e==o.oUser.gid||o.bSetAutoScroll);return t},fNewMsgNotice:function(e){yp.module.fCallFun("oBaseUI","fNewMsgNotice",[e])},oExtraDataFn:{},aExtraDataFn:[],fChatExtraDataRegist:function(e){var o=this;e.fun&&(o.oExtraDataFn[e.key]=o.aExtraDataFn.length,e.caller=e.caller||o,o.aExtraDataFn.push(e))},fLoadMedal:function(){var e=this;yp.ajax(oPageConfig.oUrl.sLoadMedalUrl,{type:"get",data:{_v:Math.floor($.now()/6e4)},dataType:"json"}).done(function(o){e.oMedal=o,yp.pub("page/medal/get",{data:e.oMedal})})},fGetChaterByGid:function(e){var o=this;return o.oChater.getOne(e)},fGetChatTextById:function(e){var o=this;return o.oChatContent[e]},fReturnVIconHtml:function(e){var o=this;return'<i data-uid="'+e.uid+'" class="authenticate-icon '+o.options.vLevelClass[e.vlevel]+' js-v-icon"></i>'},fReturnIconHtml:function(e,o){var t=this;return e.iconHtml="",yp.each(t.aIconHtmlFun,function(t){t.fun(e,o||"chat")}),e.iconHtml&&(e.iconHtml='<div class="room-chat-tags di">'+e.iconHtml+"</div>"),e}};"undefined"!=typeof module?module.exports=e:"function"==typeof define&&define.amd?define(function(){return e}):window.oMainData=e}();