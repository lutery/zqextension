+function(){var o={_ui:{},init:function(){var o=this;oPageConfig.oProp={},oPageConfig.oPropTypeIndex={},o.view(),o.bindEvent(),o.listenYpEvent()},view:function(){var o=this,p=o._ui;$("body").append('<div class="liveMessage-bags-ibox tabs hidden js-room-prop-panel" id="js-room-prop-panel" style="z-index: 15">                          <i class="arrow"></i>                          <div class="hd">                            <ul class="clearfix">                              <li class="tab active">                                <a href="javascript:;">永久道具</a>                              </li>                              <li class="tab">                                <a href="javascript:;">时效道具</a>                              </li>                            </ul>                          </div>                          <div class="bd">                            <!-- 滚动条 -->                            <div class="js-prop-list-container" style="position: relative">                              <div class="tabc active">                                <ul class="clearfix js-prop-list" data-type="forever" style="display:none;"></ul>                                <div class="small-no-subscription-list js-prop-list-none" data-type="forever" style="height: auto; line-height: normal">                                  <i class="qn-logo dv"></i>                                  <span class="text dv">暂无道具</span>                                </div>                                <div class="js-prop-list-loading" style="font-size:12px;text-align:left;display:none;">加载中...</div>                              </div>                              <div class="tabc">                                <ul class="clearfix js-prop-list" data-type="timeLimit" style="display:none;"></ul>                                <div class="small-no-subscription-list js-prop-list-none" data-type="timeLimit" style="height: auto; line-height: normal">                                  <i class="qn-logo dv"></i>                                  <span class="text dv">暂无道具</span>                                </div>                                <div class="js-prop-list-loading" style="font-size:12px;text-align:left;display:none;">加载中...</div>                              </div>                              <!-- 背包提示弹窗 -->                              <div class="bags-hover-ibox js-hover-ibox" style="display:none">                                <i class="arrow"></i>                                <div class="content clearfix">                                  <div class="left-content">                                    <div class="img-box">                                       <img src="" alt="" class="js-hover-prop-img"/>                                    </div>                                  </div>                                  <div class="right-content">                                    <div class="hd js-hover-prop-name"></div>                                    <div class="bd js-hover-prop-desc"></div>                                  </div>                                </div>                              </div>                              <!-- 提示弹窗End -->                            </div>                          </div>                        </div>'),p.prop_item_html='<li class="js-prop-item" data-id="${id}">                              <a href="javascript" >                                <img src="${imageShow}" alt="">                                <div class="sub-tit-area js-prop-item-cnt" style="${cntDisplay} width: 22px;">${cntShow}</div>                              </a>                            </li>',p.$prop_panel=$("#js-room-prop-panel"),p.$prop_hover=p.$prop_panel.find(".js-hover-ibox"),p.$prop_panel.tabs(),$(".js-room-fun-area-right").append(p.$prop_panel)},bindEvent:function(){var o=this,p=o._ui;$(".js-prop-package").on("click",function(e){e.preventDefault();var i=$(this);p.$prop_panel.hasClass("hidden")?oPageConfig.oLoginInfo?o.fShowPanel(i):yp.pub("page/login"):o.fHidePanel()}),p.$prop_panel.on("click",".js-prop-item",function(o){o.preventDefault(),yp.pub("page/prop/view",{propId:$(this).data("id"),source:window.isLive?"live":"topic"})}),p.$prop_panel.on("mouseenter",".js-prop-item",function(p){var e=$(this);o.fShowDescHover(e)}).on("mouseleave",".js-prop-item",function(o){p.$prop_hover.hide()})},listenYpEvent:function(){var o=this,p=o._ui;yp.sub("page/login/done",function(){o.fLoadPropList()}),yp.sub("page/logout/done",function(){p.$prop_panel.addClass("hidden")}),yp.sub("page/regist/done",function(){o.fLoadPropList()}),yp.sub("page/prop/used",function(o,e){var i=e.propId,a=p.$prop_panel.find('.js-prop-item[data-id="'+i+'"]'),n=oPageConfig.oProp[i];a.toggle(0<n.count),a.find(".js-prop-item-cnt").html(100<=n.count?"99+":n.count)})},fLoadPropList:function(){var o=this,p=o._ui;if(p.$prop_panel.hide(),oPageConfig.oLoginInfo){p.$prop_panel.find(".js-proo-tabs").tabs("active",0),p.$prop_panel.find(".js-prop-list").hide(),p.$prop_panel.find(".js-prop-list-none").hide(),p.$prop_panel.find(".js-prop-list-loading").show();var e={};window.isLive?(e.type=2,e.gameId=oPageConfig.oRoom.gameId,e.roomId=oPageConfig.oRoom.id):(e.type=1,e.topicUrl=window.location.pathname.slice(1)),yp.ajax("/api/user/prop.list",{type:"post",data:e,dataType:"json"}).always(function(){p.$prop_panel.find(".js-prop-list-loading").hide()}).done(function(o){if(0==o.code){if(oPageConfig.oProp={},oPageConfig.oPropTypeIndex={},o.data.permanentPropList){var e="";yp.each(o.data.permanentPropList,function(o){oPageConfig.oProp[o.id]=o,oPageConfig.oPropTypeIndex[o.type]||(oPageConfig.oPropTypeIndex[o.type]=[]),1==+o.available&&oPageConfig.oPropTypeIndex[o.type].push(o),o.cntDisplay=0<o.count?"":"display:none;",o.cntShow=100<=o.count?"99+":o.count,o.imageShow=o.img.packageImg,e+=yp.format(p.prop_item_html,o)}),p.$prop_panel.find('.js-prop-list[data-type="forever"]').html(e),p.$prop_panel.find('.js-prop-list[data-type="forever"]').toggle(!!e),p.$prop_panel.find('.js-prop-list-none[data-type="forever"]').toggle(!e)}else p.$prop_panel.find('.js-prop-list-none[data-type="forever"]').show();if(o.data.durationPropList){var i="";yp.each(o.data.durationPropList,function(o){oPageConfig.oProp[o.id]=o,oPageConfig.oPropTypeIndex[o.type]||(oPageConfig.oPropTypeIndex[o.type]=[]),1==+o.available&&oPageConfig.oPropTypeIndex[o.type].push(o),o.cntDisplay=0<o.count?"":"display:none;",o.cntShow=100<=o.count?"99+":o.count,o.imageShow=o.img.packageImg,i+=yp.format(p.prop_item_html,o)}),p.$prop_panel.find('.js-prop-list[data-type="timeLimit"]').html(i),p.$prop_panel.find('.js-prop-list[data-type="timeLimit"]').toggle(!!i),p.$prop_panel.find('.js-prop-list-none[data-type="timeLimit"]').toggle(!i)}else p.$prop_panel.find('.js-prop-list-none[data-type="timeLimit"]').show();oPageConfig.oPropTypeIndex[4]&&oPageConfig.oPropTypeIndex[4].length&&fSortArr(oPageConfig.oPropTypeIndex[4],{by:"endTime"})}else yp.ajaxNotice(o),p.$prop_panel.find(".js-prop-list-none").show()}).fail(function(){p.$prop_panel.find(".js-prop-list-none").show()})}p.$prop_panel.show()},fShowDescHover:function(o){var p=this,e=p._ui,i=o.offset(),a=e.$prop_panel.find(".js-prop-list-container").offset(),n=o.data("id"),t=oPageConfig.oProp[n];if(t&&o.length){var s=i.left-a.left-(e.$prop_hover.outerWidth()/2-o.outerWidth()/2),r=i.top-a.top-e.$prop_hover.outerHeight()-10;e.$prop_hover.css({left:s,top:r}),e.$prop_hover.find(".js-hover-prop-img").attr("src",t.img.descImg||""),e.$prop_hover.find(".js-hover-prop-name").html(t.name),e.$prop_hover.find(".js-hover-prop-desc").html(t.txt.descTxt||""),e.$prop_hover.show()}},fShowPanel:function(o){var p=this,e=p._ui,i=o.offset(),a=$(".js-room-fun-area-right").offset();$("body").off("click.propPack").on("click.propPack",function(o){o.preventDefault();var e=$(o.target);e.hasClass("js-room-prop-panel")||0!=e.closest(".js-room-prop-panel").length||e.hasClass("js-prop-package")||e.hasClass("js-prop-view-pop-panel")||0!=e.closest(".js-prop-view-pop-panel").length||e.hasClass("js-name-pop-panel")||0!=e.closest(".js-name-pop-panel").length||($("body").off("click.propPack"),p.fHidePanel())}),p.fLoadPropList(),e.$prop_panel.css({left:i.left-a.left-(e.$prop_panel.outerWidth()/2-o.outerWidth()/2)}),e.$prop_panel.removeClass("hidden")},fHidePanel:function(){var o=this,p=o._ui;p.$prop_panel.addClass("hidden")}};"undefined"!=typeof module?module.exports=o:"function"==typeof define&&define.amd?define(function(){return o}):window.oRoomProp=o}();