+function(){var a={_ui:{},init:function(){var a=this;a.listenYpEvent(),a.listenSocketEvent()},listenYpEvent:function(){var a=this;yp.sub("page/fire/time/start",function(e,t){a.aFireShow.push(t.uid),a.fCarShowNext()}),yp.sub("page/document/vidible",function(){"hidden"==yp.documentVisible&&a.fCarShowNext()}),yp.sub("page/fire/time/end",function(e,t){var n=$.inArray(t.uid,a.aFireShow);n>-1&&a.aFireShow.splice(n,1)}),yp.sub("page/car/effect/show",function(e,t){a.fCarShowReady(t.data)})},listenSocketEvent:function(){var a=this;$.topic?($.topic("msgc/caranimationend").sub(function(){a.fCarShowNext()}),$.topic("msgc/Car.Show").sub(function(a){var e="";a.data.rpic=a.data.host+a.data.rpic,a.data.flashurl=a.data.host+a.data.flashurl,a.data.mpic=a.data.host+a.data.mpic;var t="";if(a.data.slevel&&(0<a.data.slevel.level||8<=a.data.slevel.pos)){var n=fLevelIconClass(a.data.slevel.level,a.data.slevel.pos,a.data.slevel.type);t='<i class="all-level '+n+' dv"></i>'}var i="";0<a.data.guard&&(i='<a href="https://www.zhanqi.tv/news/2016/09/18/1245.html" target="_blank" class="dv guardian-icon guardian-'+a.data.guard+'"></a>');var e='<div style="line-height: 24px;">'+i+t+'<span class="dv name">'+a.data.name+'&nbsp;</span><span class="dv">'+a.data.action+'</span><img class="gifts-icon png" src="'+a.data.rpic+'" /></div>',s={};s.content=e,yp.pub("page/chatmsg/custom",{type:"normal",data:s}),(65==oPageConfig.oRoom.gameId||2!=a.data.area)&&yp.pub("page/car/effect/show",a)})):window.JSInterface=function(e){"caranimationend"==e.cmdid&&a.fCarShowNext()}},fAppendCarContainor:function(){var a=this,e=a._ui,t='<div class="chat-car-ibox" style="display:none;">                    <div class="chat-car-hd"></div>                    <div class="chat-car-bd"></div>                  </div>';e.$car_containor=$(t),$("body").append(e.$car_containor)},aCarQueue:[],fCarShowReady:function(a){var e=this;a.flashsize=a.flashsize.split("*"),e.aCarQueue.push(a),1==e.aCarQueue.length&&e.fCarShow()},aFireShow:[],fCarShow:function(){var a=this,e=a._ui;if(0==a.aCarQueue.length)return!1;if(a.aFireShow.length&&(!oPageConfig.oLoginInfo||t.uid!=oPageConfig.oLoginInfo.uid)||"hidden"==yp.documentVisible)return a.fCarShowNext(),!1;e.$car_containor||a.fAppendCarContainor();var t=a.aCarQueue[0];e.$car_containor.show().toggleClass("body-car-ibox",2==t.position).find(".chat-car-bd").css({width:t.flashsize[0],height:t.flashsize[1]}).html('<div id="js-car-show-panel"></div>'),t.slevel&&(0<t.slevel.level||8<=t.slevel.pos)?e.$car_containor.find(".chat-car-hd").html('<i class="all-level '+fLevelIconClass(t.slevel.level,t.slevel.level.pos,t.slevel.level.type)+' dv"></i><span class="name dv">'+t.name+"</span>"):e.$car_containor.find(".chat-car-hd").html('<span class="name dv">'+t.name+"</span>");var n=e.$car_containor.outerWidth(),i=e.$car_containor.outerHeight(),s={marginTop:0-i/2,marginLeft:0-n/2,top:"50%",left:"50%",position:"fixed",zIndex:10};if(1==t.position){var o=$("#js-right-chat-panel .js-right-chat-layer"),r=o.offset();o.width()<n?s.left=r.left+(o.width()-n):s.left=r.left+(o.width()-n)/2,s.top=r.top+(o.height()-i)/2,s.margin=0,s.position="absolute"}e.$car_containor.css(s);var c=!-[1];c?swfobject.embedSWF(t.flashurl,"js-car-show-panel","100%","100%","11.0.0","",{},{wmode:"transparent",allowScriptAccess:"always"},{id:"js-car-show-elem"}):(t.canvasJsUrl||(t.canvasJsUrl=t.canves?"https://img1.zhanqi.tv/uploads/H5/"+t.canves+"/"+t.canves+".js":""),yp.use("specialEffects",function(a,e){e.show({canvasType:t.canves?t.canves:"",canvasJsUrl:t.canvasJsUrl,elemId:"js-car-show-panel",effectsType:"ride",swfUrl:t.flashurl,swfId:"js-car-show-elem",width:t.flashsize[0],height:t.flashsize[1]})}))},fCarShowNext:function(){var a=this,e=a._ui;return e.$car_containor?(e.$car_containor.find(".chat-car-hd").html(""),e.$car_containor.find(".chat-car-bd").html(""),e.$car_containor.hide(),0==a.aCarQueue.length?!1:(a.aCarQueue.shift(),void a.fCarShow())):!1}};"undefined"!=typeof module?module.exports=a:"function"==typeof define&&define.amd?define(function(){return a}):window.oCar=a}();