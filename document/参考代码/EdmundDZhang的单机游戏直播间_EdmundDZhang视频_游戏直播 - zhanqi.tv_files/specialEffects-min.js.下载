+function(){var e={gift:"gift_lib",ride:"ride_lib",ads:"avt_lib"},i={show:function(e){var i=this,t=/msie/.test(navigator.userAgent.toLowerCase());350<e.width&&350<e.height&&e.swfUrl?i.fUseSwf(e.swfUrl,e.elemId,e.swfId):e.videoSource&&i.fVideoSupport()?i.fUseMp4(e.elemId,e.videoSource,e.swfId):!t&&e.canvasJsUrl&&i.fCanvasSupport()?i.fLoadCanvasJs(e.canvasType,e.canvasJsUrl,e.elemId,e.effectsType,e.swfId):e.gifUrl?i.fUseGif(e.elemId,e.gifUrl,e.swfId):i.fUseSwf(e.swfUrl,e.elemId,e.swfId)},fCanvasSupport:function(){var e=document.createElement("canvas");return!!e.getContext&&!!e.getContext("2d")},fVideoSupport:function(){var e=document.createElement("video"),i=!1;try{(i=!!e.canPlayType)&&(i=new Boolean(i),i.ogg=e.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),i.h264=e.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),i.webm=e.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,""))}catch(t){}return i},fLoadCanvasJs:function(i,t,a,n,s){var o=this;$.ajax({url:t,type:"GET",dataType:"script",cache:!0}).done(function(){var d=e[n];if(window[d].properties.manifest&&window[d].properties.manifest.length){var r=t.split("/");r.pop();var c=r.join("/");yp.each(window[d].properties.manifest,function(e){e.src=c+"/"+e.src});var f=new createjs.LoadQueue(!1);f.addEventListener("fileload",function(e){if("image"==e.item.type)switch(n){case"gift":gift_images[e.item.id]=e.result;break;case"ride":ride_images[e.item.id]=e.result;break;case"ads":avt_images[e.item.id]=e.result}}),f.addEventListener("complete",function(){o.fUseCanvas(i,a,n,s)}),f.loadManifest(window[d].properties.manifest)}else o.fUseCanvas(i,a,n,s)})},fUseCanvas:function(i,t,a,n){var s,o,d,r=e[a],c=$("#"+t),f=c.parent().width(),l=c.parent().height();c.replaceWith('<canvas id="'+n+'" width="'+f+'" height="'+l+'"></canvas>'),s=document.getElementById(n),d=new window[r][i],o=new createjs.Stage(s),o.addChild(d),o.update(),createjs.Ticker.setFPS(window[r].properties.fps),createjs.Ticker.addEventListener("tick",o),d.addEventListener("onComplete",function(){switch(o.removeAllChildren(),d=null,o=null,a){case"gift":window.gift_lib=null,window.gift_images=null,JSInterface({cmdid:"giftanimationend"});break;case"ride":window.ride_lib=null,window.ride_images=null,JSInterface({cmdid:"caranimationend"});break;case"ads":window.avt_lib=null,window.avt_images=null}})},fUseMp4:function(e,i,t){var a=$("#"+e),n=$('<video id="'+t+'" width="100%" height="100%" autoplay="true" loop preload="auto" poster=""><source src="'+i+'" type="video/mp4"> 您的浏览器暂时无法播放此视频.</video>');a.replaceWith(n)},fUseGif:function(e,i,t){var a=$("#"+e),n=$('<img id="'+t+'" src="'+i+'" />');a.replaceWith(n)},fUseSwf:function(e,i,t){swfobject.embedSWF(e,i,"100%","100%","11.0.0","",{},{wmode:"transparent",allowScriptAccess:"always"},{id:t||"js-effects-flash-"+$.now()})}};"undefined"!=typeof module?module.exports=i:"function"==typeof define&&define.amd?define(function(){return i}):window.oEffects=i}();