yp.ready(function(){var e=window.oPageConfig,o=(e.oUrl,e.oLoginInfo,yp.ui,yp.noop,{create:function(){function o(){var e=getQueryString("bf_ref_url"),o=$.cookie("bf_ref_url");if(e&&!o){var n=new Date;n.setTime(n.getTime()+36e5),$.cookie("bf_ref_url",e,{expires:n,path:"/"})}}var n=this;!window.noneGoTop&&yp.ui.$win.goTop(),o(),yp.sub("page/logout/done",function(){yp.pub("page/cookie/oLoginInfo",{cookie_value:1}),$.removeCookie("oViewer"),window.bUserCenter&&(window.location.href=e.oUrl.sUrlHost)}),yp.sub("page/login/done",function(e,o){yp.pub("page/cookie/oLoginInfo",{cookie_value:o}),$.removeCookie("oViewer"),yp.pub("page/sgamer/active")}),yp.sub("page/regist/done",function(e,o){yp.pub("page/cookie/oLoginInfo",{cookie_value:o}),$.removeCookie("oViewer")}),yp.sub("page/site/level/update",function(o,n){e.oLoginInfo&&e.oLoginInfo.uid==n.uid&&(e.oLoginInfo.slevel=n,yp.pub("page/site/level/update/next"))});var i=null;yp.sub("page/site/phone/check",function(o,n){if(!e.oLoginInfo)return!1;var a,t,s=e.oLoginInfo.bindMobile,l=s?s.split("-"):[];return l.length?(a=l[0],t=l[1],t?-1==a.indexOf("+")&&(a="+"+a):(t=a,a="+86"),void(i?i.init(t,a,n.bCountrySelect,n.bPhoneInput,n.submitUrl):yp.use("phoneCheck",function(e,o){i=o,i.init(t,a,n.bCountrySelect,n.bPhoneInput,n.submitUrl)}))):!1}),yp.sub("page/geetest/load",function(e){return window.Geetest?!1:(s=document.createElement("script"),s.src="//api.geetest.com/get.php?callback=geetestLoaded",void $("head")[0].appendChild(s))}),window.geetestLoaded=function(){yp.pub("page/geetest/loaded")},yp.sub("page/follow/error",function(e,o){o.message&&yp.errorNotify(o.message)}),yp.sub("page/v/regist",function(e,o){n.vHash[o.uid]=o}),$("body").on("mouseenter",".js-v-icon",function(e){n.fShowVPanel($(this))}).on("mouseleave",".js-v-icon",function(e){n.fHideV()}),+function(){yp.sub("page/follow",function(o,n){var i=n.flag,a=n.uid,t=yp.format(e.oUrl.sUrlFollow,{type:i?"":".unfollow"}),s=n.callback||null;yp.ajax(t,{type:"post",data:{uid:a}}).done(function(e){e.data;e.code?yp.pub("page/follow/error",{uid:a,flag:i,follow:e.data.follow,message:e.message}):yp.pub("page/follow/done",{uid:a,flag:i,follow:e.data.follow}),s&&s(e)})})}(),+function(){yp.sub("page/watchrecord/add",function(o,n){2==n.type&&yp.ajax(yp.format(e.oUrl.sWatchRecord,{id:n.id,type:n.type}))})}(),$(".zq-tool-download").on("click",function(e){e.preventDefault();var o=$(this).attr("href");confirm("您正在下载战旗主播工具，是否立即下载？","","",{btns:[{name:"是",callback:function(){this.close(),window.open(o)}},{name:"否"}]})})},ajax:function(e,o){return yp.ajax(e,o).done(function(e){})},vHash:{},$vContainer:null,fAppendVContainer:function(){var e=this,o="";o='<div class="site-v-panel" style="display:none;">                <div class="img-box">                  <img class="js-avatar" src="" alt="">                </div>                <div class="v-info">                  <span class="v-nickname js-nickname"></span><i class="site-v-icon js-v-type"></i>                  <span class="v-desc js-v-desc"></span>                </div>              </div>',e.$vContainer=$(o),$("body").append(e.$vContainer)},vPanelBeHover:!1,fShowVPanel:function(e){var o=this,n=e.data("uid");o.vPanelBeHover=!0,o.vHash[n]?o.fDescAppend(o.vHash[n],e):o.fLoadVdesc(n,e)},fDescAppend:function(e,o){var n=this;n.$vContainer||n.fAppendVContainer();var i=o.offset();i.top=i.top-105,i.left=i.left-96,$(window).width()<i.left&&(i.left=$(window).width()-100),0>i.top&&(i.top=i.top+104+21),n.$vContainer.show().css(i),n.$vContainer.find(".js-nickname").html(e.nickname),n.$vContainer.find(".js-avatar").attr("src",e.avatar+"-big"),n.$vContainer.find(".js-v-desc").html(e.vdesc),n.$vContainer.find(".js-v-type").data("old")&&n.$vContainer.find(".js-v-type").removeClass(n.$vContainer.find(".js-v-type").data("old")),n.$vContainer.find(".js-v-type").addClass("site-v-icon-"+e.vlevel).data("old","site-v-icon-"+e.vlevel)},fLoadVdesc:function(o,n){var i=this;i.$vContainer&&i.$vContainer.hide(),yp.ajax(yp.format(e.oUrl.sLoadVdescUrl,{uid:o}),{type:"get",dataType:"json"}).done(function(e){0==e.code?(i.vHash[e.data.uid]=e.data,i.vPanelBeHover&&i.fDescAppend(e.data,n)):i.fHideV()})},fHideV:function(){var e=this;e.vPanelBeHover=!1,e.$vContainer&&e.$vContainer.hide()}});o.create()}),+function(e){"use strict";var o=window.oPageConfig,n=(o.oUrl,{getUname:function(){return yp.localStorage.getItem("login-uname")||""},setUname:function(e){yp.localStorage.setItem("login-uname",e)}});yp.login=n}(jQuery),yp.ready(function(){var e={init:function(){this.view(),this.listen()},view:function(){},listen:function(){var e=this;yp.sub("loginCallback",function(o,n){e.createIframe(n.code)})},createIframe:function(e){if("20001"==e)return void(window.pageType&&"login"==window.pageType&&"register"==window.pageType||(window.location.href=window.location.href));yp.login.hideModal(),yp.regist.hideModal();var o=document.createElement("iframe");o.src="http://"+window.location.host+"/api/auth/partner/bindpage?code="+e,o.id="bandWin",o.style.position="absolute",o.style.top="50%",o.style.left="50%",o.style.marginLeft="-300px",o.style.marginTop="-200px",o.style.width="400px",o.style.height="289px",o.style.zIndex="9999",document.body.appendChild(o),$(o).removeClass("hidden")}};e.init()}),function(e,o,n){var i=yp.ui,a={$element:null,init:function(e){this.$element=e,this.view(),this.bindEvent()},view:function(){var n=o.ognPage?"回到观战":"回到顶部",i=o.ognPage?"ognpage":"",a=oPageConfig.oUparea&&oPageConfig.oUparea.hideLive?"display:none;":"",t=oPageConfig.oUparea&&oPageConfig.oUparea.hideApp?"display:none;":"",s='<div class="up-area '+i+' js-up-area">                    <div class="hd"></div>                    <div class="bd">                      <a href="javascript:;" style="" class="up-iconz hidden" title="'+n+'"><i></i></a>                      <a href="'+oPageConfig.oUrl.sAnchorApplyUrl+'" target="_blank" class="my-live" title="我要直播" style="'+a+'"><i></i></a>                      <a href="'+oPageConfig.oUrl.sAppDownUrl+'" target="_blank" style="" class="mobile-app png" title="移动APP" style="'+t+'">                        <i></i><div class="bg"></div>                      </a>                      <a href="'+oPageConfig.oUrl.sSuggestUrl+'" target="_blank" class="feedback-icon" title="页面反馈"><i></i></a>                    </div>                    <div class="ft"></div>                  </div>';e("body").append(s)},bindEvent:function(){function n(){var e=a.$element.scrollTop(),o=i.$win.height();if(o+t-yp.global.height<e){if(!i.$goTop.hasClass("hidden"))return;i.$goTop.removeClass("hidden")}else{if(!i.$goTop.is(":visible"))return;i.$goTop.addClass("hidden")}}var a=this,t=0;o.ognPage&&(t=e(".match-content").offset().top-60,0>t&&(t=0)),i.$goTop=e(".up-iconz"),i.$up_area=e(".js-up-area"),a.$element.scroll(function(){n()}),n(),i.$goTop.click(function(){a.$element.scrollTop(t),i.$goTop.addClass("hidden")})}};e.fn.goTop=function(){a.init(e(this))}}(jQuery,window),yp.ready(function(){yp.sub("page/alert/bindphone",function(){$.ibox({title:"提示",content:"您需要绑定手机后才可领取，立即去绑定吧！",btns:[{name:"去绑定",callback:function(){window.open("/user/safeBind")}}]})})});